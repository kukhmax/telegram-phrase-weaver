<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Repeat Stats Sync</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stats-display {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            min-width: 100px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        .stat-label {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .again-btn { background: #dc3545; }
        .good-btn { background: #ffc107; color: #000; }
        .easy-btn { background: #28a745; }
        .reset-btn { background: #6c757d; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Repeat Statistics Synchronization</h1>
    
    <div class="test-container">
        <h3>üìä Current Statistics</h3>
        <div class="stats-display">
            <div class="stat-item">
                <div class="stat-number" id="again-cards-stat">0</div>
                <div class="stat-label">Again</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="good-cards-stat">0</div>
                <div class="stat-label">Good</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="easy-cards-stat">0</div>
                <div class="stat-label">Easy</div>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h3>üéÆ Test Buttons</h3>
        <button class="again-btn" onclick="testRating('again')">Again (+1)</button>
        <button class="good-btn" onclick="testRating('good')">Good (+1)</button>
        <button class="easy-btn" onclick="testRating('easy')">Easy (+1)</button>
        <button class="reset-btn" onclick="resetStats()">Reset</button>
    </div>
    
    <div class="test-container">
        <h3>üìù Debug Log</h3>
        <div id="debug-log"><pre>Logs will appear here...</pre></div>
        <button onclick="clearLog()">Clear Log</button>
    </div>

    <script>
        // –ò–º–∏—Ç–∏—Ä—É–µ–º sessionRepeatStats –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let sessionRepeatStats = {
            againCards: 0,
            goodCards: 0,
            easyCards: 0
        };
        
        const logs = [];
        
        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            logs.push(`[${timestamp}] ${message}`);
            updateLog();
        }
        
        function updateLog() {
            document.getElementById('debug-log').innerHTML = 
                '<pre>' + logs.slice(-10).join('\n') + '</pre>';
        }
        
        function clearLog() {
            logs.length = 0;
            updateLog();
        }
        
        // –ö–æ–ø–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function updateRepeatStatsDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ DOM —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
            const againStat = document.getElementById('again-cards-stat');
            const goodStat = document.getElementById('good-cards-stat');
            const easyStat = document.getElementById('easy-cards-stat');
            
            if (againStat) againStat.textContent = sessionRepeatStats.againCards;
            if (goodStat) goodStat.textContent = sessionRepeatStats.goodCards;
            if (easyStat) easyStat.textContent = sessionRepeatStats.easyCards;
            
            addLog('Updated repeat stats: ' + JSON.stringify(sessionRepeatStats));
        }
        
        function testRating(rating) {
            addLog(`Testing rating: ${rating}`);
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –∏–∑ handleCardRating
            switch (rating) {
                case 'again':
                    sessionRepeatStats.againCards++;
                    addLog('Incremented againCards to ' + sessionRepeatStats.againCards);
                    break;
                case 'good':
                    sessionRepeatStats.goodCards++;
                    addLog('Incremented goodCards to ' + sessionRepeatStats.goodCards);
                    break;
                case 'easy':
                    sessionRepeatStats.easyCards++;
                    addLog('Incremented easyCards to ' + sessionRepeatStats.easyCards);
                    break;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateRepeatStatsDisplay();
        }
        
        function resetStats() {
            sessionRepeatStats = {
                againCards: 0,
                goodCards: 0,
                easyCards: 0
            };
            addLog('Reset all statistics to 0');
            updateRepeatStatsDisplay();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('DOMContentLoaded', () => {
            addLog('Test page loaded');
            addLog('DOM elements found:');
            addLog('- again-cards-stat: ' + (document.getElementById('again-cards-stat') ? 'YES' : 'NO'));
            addLog('- good-cards-stat: ' + (document.getElementById('good-cards-stat') ? 'YES' : 'NO'));
            addLog('- easy-cards-stat: ' + (document.getElementById('easy-cards-stat') ? 'YES' : 'NO'));
            updateRepeatStatsDisplay();
        });
    </script>
</body>
</html>