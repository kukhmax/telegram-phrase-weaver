<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —è–∑—ã–∫–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .language-display {
            font-size: 18px;
            margin: 10px 0;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 4px;
        }
        .test-button {
            background: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #1565c0;
        }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —è–∑—ã–∫–æ–≤</h1>
    
    <div class="test-section">
        <h2>–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π getLanguageFlag –∏ getLanguageName</h2>
        <div id="language-tests"></div>
        <button class="test-button" onclick="testLanguageFunctions()">–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫–∏</button>
    </div>
    
    <div class="test-section">
        <h2>–¢–µ—Å—Ç API –∫–æ–ª–æ–¥</h2>
        <div id="api-tests"></div>
        <button class="test-button" onclick="testDeckAPI()">–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API</button>
    </div>
    
    <div class="test-section">
        <h2>–°–∏–º—É–ª—è—Ü–∏—è generateCards</h2>
        <div id="generate-cards-test"></div>
        <button class="test-button" onclick="simulateGenerateCards(1)">–¢–µ—Å—Ç –∫–æ–ª–æ–¥—ã 1 (en->ru)</button>
        <button class="test-button" onclick="simulateGenerateCards(2)">–¢–µ—Å—Ç –∫–æ–ª–æ–¥—ã 2 (fr->ru)</button>
    </div>

    <script>
        // –ö–æ–ø–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function getLanguageName(code) {
            const languages = {
                'en': 'English',
                'ru': '–†—É—Å—Å–∫–∏–π',
                'fr': 'Fran√ßais',
                'de': 'Deutsch',
                'es': 'Espa√±ol',
                'it': 'Italiano',
                'pt': 'Portugu√™s',
                'pl': 'Polski',
            };
            return languages[code] || code;
        }
        
        function getLanguageFlag(code) {
            const flags = {
                'en': 'üá∫üá∏',
                'ru': 'üá∑üá∫',
                'fr': 'üá´üá∑',
                'de': 'üá©üá™',
                'es': 'üá™üá∏',
                'it': 'üáÆüáπ',
                'pt': 'üáµüáπ',
                'pl': 'üáµüá±',
            };
            return flags[code] || 'üåê';
        }
        
        function testLanguageFunctions() {
            const testContainer = document.getElementById('language-tests');
            const languages = ['en', 'ru', 'fr', 'de', 'es', 'pl'];
            
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>';
            
            languages.forEach(code => {
                const flag = getLanguageFlag(code);
                const name = getLanguageName(code);
                html += `<div class="language-display">${flag} ${name} (–∫–æ–¥: ${code})</div>`;
            });
            
            testContainer.innerHTML = html;
        }
        
        async function testDeckAPI() {
            const testContainer = document.getElementById('api-tests');
            testContainer.innerHTML = '<p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API...</p>';
            
            try {
                // –¢–µ—Å—Ç –∫–æ–ª–æ–¥—ã 1
                const response1 = await fetch('http://localhost:8000/api/decks/1?user_id=1');
                const deck1 = await response1.json();
                
                // –¢–µ—Å—Ç –∫–æ–ª–æ–¥—ã 2
                const response2 = await fetch('http://localhost:8000/api/decks/2?user_id=1');
                const deck2 = await response2.json();
                
                let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã API:</h3>';
                html += `<div class="language-display">–ö–æ–ª–æ–¥–∞ 1: ${getLanguageFlag(deck1.source_language)} ${getLanguageName(deck1.source_language)} ‚Üí ${getLanguageFlag(deck1.target_language)} ${getLanguageName(deck1.target_language)}</div>`;
                html += `<div class="language-display">–ö–æ–ª–æ–¥–∞ 2: ${getLanguageFlag(deck2.source_language)} ${getLanguageName(deck2.source_language)} ‚Üí ${getLanguageFlag(deck2.target_language)} ${getLanguageName(deck2.target_language)}</div>`;
                
                testContainer.innerHTML = html;
            } catch (error) {
                testContainer.innerHTML = `<p style="color: red;">–û—à–∏–±–∫–∞ API: ${error.message}</p>`;
            }
        }
        
        async function simulateGenerateCards(deckId) {
            const testContainer = document.getElementById('generate-cards-test');
            testContainer.innerHTML = `<p>–°–∏–º—É–ª—è—Ü–∏—è generateCards –¥–ª—è –∫–æ–ª–æ–¥—ã ${deckId}...</p>`;
            
            try {
                // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é generateCards
                const response = await fetch(`http://localhost:8000/api/decks/${deckId}?user_id=1`);
                if (response.ok) {
                    const deck = await response.json();
                    const currentDeck = {
                        id: deck.id,
                        name: deck.name,
                        source_language: deck.source_language,
                        target_language: deck.target_language
                    };
                    
                    const sourceFlag = getLanguageFlag(currentDeck.source_language);
                    const targetFlag = getLanguageFlag(currentDeck.target_language);
                    const sourceName = getLanguageName(currentDeck.source_language);
                    const targetName = getLanguageName(currentDeck.target_language);
                    
                    let html = `<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–æ–ª–æ–¥—ã ${deckId}:</h3>`;
                    html += `<div class="language-display">–ù–∞–∑–≤–∞–Ω–∏–µ: ${deck.name}</div>`;
                    html += `<div class="language-display">–ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫: ${sourceFlag} ${sourceName}</div>`;
                    html += `<div class="language-display">–¶–µ–ª–µ–≤–æ–π —è–∑—ã–∫: ${targetFlag} ${targetName}</div>`;
                    html += `<div class="language-display">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${sourceFlag} ${sourceName} ‚Üí ${targetFlag} ${targetName}</div>`;
                    
                    testContainer.innerHTML = html;
                } else {
                    testContainer.innerHTML = `<p style="color: red;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–ª–æ–¥—ã ${deckId}</p>`;
                }
            } catch (error) {
                testContainer.innerHTML = `<p style="color: red;">–û—à–∏–±–∫–∞: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>